<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Vue 3 è·³è½¬ç¤ºä¾‹</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 50px;
    }
  </style>
</head>

<body>
  <div id="app"></div>

  <script>
    const { createApp, ref, onMounted } = Vue;

    // è®¡æ•°ç»„ä»¶: å±•ç¤ºå€’è®¡æ—¶å¹¶åœ¨æŒ‡å®šæ—¶é—´åè§¦å‘é¡µé¢è·³è½¬
    const CounterPage = {
      // ä½¿ç”¨ emit å‘çˆ¶ç»„ä»¶å‘é€è·³è½¬äº‹ä»¶
      template: `
        <div>
          <h1>ç¾å¦™ +{{ count }}</h1>
          <p>è¯·ç¨ç­‰ï¼Œé©¬ä¸Šè¿›å…¥æ„Ÿè°¢é¡µé¢...</p>
        </div>
      `,
      setup(props, { emit }) {
        // è®¡æ•°å™¨çŠ¶æ€ç®¡ç†
        const count = ref(0);
        let intervalId;

        // ç»„ä»¶æŒ‚è½½æ—¶å¯åŠ¨è®¡æ—¶å™¨å’Œè·³è½¬é€»è¾‘
        onMounted(() => {
          // è®¾ç½®è®¡æ•°å™¨ï¼Œæ¯ç§’é€’å¢
          intervalId = setInterval(() => {
            count.value++;
          }, 1000);

          // 8ç§’åæ¸…é™¤è®¡æ—¶å™¨å¹¶è§¦å‘è·³è½¬äº‹ä»¶
          // ä½¿ç”¨ emit å‘é€ 'navigate' äº‹ä»¶ï¼Œæºå¸¦ç›®æ ‡é¡µé¢åç§°
          setTimeout(() => {
            clearInterval(intervalId);
            emit('navigate', 'thankyou');
          }, 8000);
        });

        return { count };
      }
    };

    // Thank You ç»„ä»¶: é™æ€æ„Ÿè°¢é¡µé¢
    const ThankYouPage = {
      template: `
        <div>
          <h1>ğŸ‰ Thank You!</h1>
          <p>æ„Ÿè°¢ä½ çš„ç­‰å¾…ï¼Œç¾å¦™æ—¶å…‰ç»§ç»­...</p>
        </div>
      `
    };

    // ä¸»åº”ç”¨ç»„ä»¶: è´Ÿè´£ç»„ä»¶åˆ‡æ¢çš„å®¹å™¨
    const App = {
      // æ³¨å†Œå­ç»„ä»¶
      components: { CounterPage, ThankYouPage },
      // ä½¿ç”¨åŠ¨æ€ç»„ä»¶ component å®ç°ç»„ä»¶åˆ‡æ¢
      // :is ç»‘å®šå½“å‰è¦æ˜¾ç¤ºçš„ç»„ä»¶å
      // @navigate ç›‘å¬å­ç»„ä»¶çš„è·³è½¬äº‹ä»¶
      template: `
        <component :is="currentView" @navigate="handleNavigate" />
      `,
      setup() {
        // å½“å‰æ˜¾ç¤ºçš„ç»„ä»¶åç§°
        const currentView = ref('CounterPage');

        // å¤„ç†å­ç»„ä»¶å‘å‡ºçš„å¯¼èˆªäº‹ä»¶
        // viewName: ç›®æ ‡é¡µé¢åç§°
        const handleNavigate = (viewName) => {
          // æ ¹æ®ä¼ å…¥çš„ viewName åˆ‡æ¢è¦æ˜¾ç¤ºçš„ç»„ä»¶
          currentView.value = viewName === 'thankyou' ? 'ThankYouPage' : 'CounterPage';
        };

        return { currentView, handleNavigate };
      }
    };

    // åˆ›å»ºå¹¶æŒ‚è½½ Vue åº”ç”¨
    createApp(App).mount('#app');
  </script>
</body>

</html>